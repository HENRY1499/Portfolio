---
import SwitchMolecule from "@/components/molecules/SwitchMolecule.astro";
import { cn } from "@/lib/utils";
import type { HTMLAttributes } from "astro/types";
type Props = HTMLAttributes<"button">;
const { class: className, ...props } = Astro.props as Props;
---

<button
  id="nav_btn"
  class={cn(
    "fixed top-2 right-2 w-10 h-10 rounded-full bg-banner-svg z-50",
    className,
  )}
>
  <div class="flex flex-col gap-[.1em] w-full h-full justify-center burger">
    <span class="w-1/2 mx-auto border-2 border-banner-label"></span>
    <span class="w-1/2 mx-auto border-2 border-banner-label"></span>
    <span class="w-1/2 mx-auto border-2 border-banner-label"></span>
  </div>
</button>

<div
  id="nav_mobile"
  class="fixed top-0 left-0 w-full h-dvh bg-banner-svg p-6 gap-4 z-40"
>
  <div
    class="w-full h-full flex flex-col items-start justify-end gap-4 border-r border-banner-label py-4"
  >
    <SwitchMolecule />
    <span data-id="home" class="text-3xl text-start uppercase">Inicio</span>
    <span data-id="project" class="text-3xl text-start uppercase"
      >Proyectos</span
    >
    <span data-id="exp" class="text-3xl text-start uppercase">Experiencia</span>
    <span data-id="about" class="text-3xl text-start uppercase">Sobre MÃ­</span>
    <span data-id="contact" class="text-3xl text-start uppercase">Contacto</span
    >
  </div>
</div>

<script is:inline>
  window.addEventListener("DOMContentLoaded", () => {
    const navBtn = document.getElementById("nav_btn");
    const navMobile = document.getElementById("nav_mobile");
    if (navBtn && navMobile) {
      navBtn.addEventListener("click", () => {
        navBtn.classList.toggle("active");
        navMobile.classList.toggle("nav-open");
      });
    }
    // Navbar links
    const links = navMobile.querySelectorAll("span[data-id]");
    links.forEach((link) => {
      link.addEventListener("click", () => {
        const id = link.dataset.id;
        if (id) {
          document.getElementById(id)?.scrollIntoView({ behavior: "smooth" });
          navBtn.classList.remove("active");
          navMobile.classList.remove("nav-open");
        }
      });
    });
  });
</script>
